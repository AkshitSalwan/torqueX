<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= typeof title !== 'undefined' ? title : 'Error' %> | TorqueX</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <!-- Clerk Authentication -->
  <% if (typeof clerkPublishableKey !== 'undefined' && clerkPublishableKey && clerkPublishableKey.length > 0) { %>
  <script src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Get Clerk publishable key from server
      const publishableKey = '<%= clerkPublishableKey %>';
      
      // Initialize Clerk with the provided key
      if (window.Clerk && publishableKey) {
        window.Clerk.load({ 
          publishableKey: publishableKey
        }).then(function() {
          console.log('Clerk initialized successfully');
          document.dispatchEvent(new Event('clerkLoaded'));
        }).catch(function(error) {
          console.log('Clerk initialization failed, using fallback auth');
          document.dispatchEvent(new Event('clerkFailed'));
        });
      }
    });
  </script>
  <% } else { %>
  <script>
    // No Clerk key configured - use fallback authentication only
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Using fallback authentication (Clerk not configured)');
      document.dispatchEvent(new Event('clerkFailed'));
    });
  </script>
  <% } %>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
  <%- include('./navbar') %>
  
  <main class="flex-grow container mx-auto px-4 py-8">